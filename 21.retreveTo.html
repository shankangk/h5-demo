<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>父页面</title>
    <script>
        // 回调函数
        function handleMessage(event) {
            // 确保只接收来自预期来源的消息
            if (event.origin !== window.location.origin) {
                return;
            }
            const data = event.data;
            console.log('接收到的数据:', data);

            // 在这里处理接收到的数据，可以更新页面内容或执行其他逻辑
            document.getElementById('receivedData').textContent = '接收到的数据: ' + JSON.stringify(data);
        }

        // 添加事件监听器
        window.addEventListener('message', handleMessage, false);

        // 打开子页面
        function openChildPage() {
            const childWindow = window.open('21.child.html', 'childWindow', 'width=600,height=400');
        }
    </script>
</head>
<body>
    <h1>父页面</h1>
    <p id="receivedData">等待接收数据...</p>
    <button onclick="openChildPage()">打开子页面</button>
</body>
</html>
