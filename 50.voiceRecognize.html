<!DOCTYPE html>
<html>
  <head>
    <title>语音识别示例</title>
  </head>
  <body>
    <button onclick="speechRecognition.start()">开始语音识别</button>
    <button onclick="speechRecognition.stop()">停止语音识别</button>

    <script>
      function initSpeechRecognition(onResultCallback, onErrorCallback) {
        const recognition = new(window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'zh-CN';

        recognition.onresult = function(event) {
          const transcript = event.results[0][0].transcript;
          if (onResultCallback) onResultCallback(transcript);
        };

        recognition.onerror = function(event) {
          if (onErrorCallback) onErrorCallback(event.error);
        };

        return {
          start: () => {
            recognition.start();
            console.log('开始语音识别。');
          },
          stop: () => {
            recognition.stop();
            console.log('停止语音识别。');
          }
        };
      }

      // 使用
      const speechRecognition = initSpeechRecognition(
        transcript => console.log('识别结果：', transcript),
        error => console.error('语音识别错误：', error)
      );
    </script>
  </body>
</html>